generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Client {
  id           Int      @default(autoincrement())
  uuid         String   @id @default(uuid())
  name         String
  email        String
  phone        String
  address      String
  cpfCnpj      String
  observations String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model CategoryProduct {
  id        Int       @default(autoincrement())
  uuid      String    @id @default(uuid())
  name      String
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  product   Product[]
}

model Product {
  id                  Int               @default(autoincrement())
  uuid                String            @id @default(uuid())
  name                String
  sku                 String?
  barcode             String?
  price               Decimal           @db.Decimal(10, 2)
  unit                Unit
  minimumStock        Int
  maximumStock        Int
  stock               Int
  categoryProductUuid String?
  categoryProduct     CategoryProduct?  @relation(fields: [categoryProductUuid], references: [uuid])
  createdAt           DateTime          @default(now())
  updatedAt           DateTime          @updatedAt
  productSupplier     ProductSupplier[]
}

model ProductSupplier {
  id           Int      @default(autoincrement())
  uuid         String   @id @default(uuid())
  productUuid  String
  supplierUuid String
  costPrice    Decimal  @db.Decimal(10, 2)
  product      Product  @relation(fields: [productUuid], references: [uuid])
  supplier     Supplier @relation(fields: [supplierUuid], references: [uuid])
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model Supplier {
  id              Int               @default(autoincrement())
  uuid            String            @id @default(uuid())
  name            String
  fantasyName     String
  cpfCnpj         String
  zipCode         String
  email           String
  phone           String
  address         String
  uf              String
  observations    String?
  createdAt       DateTime          @default(now())
  updatedAt       DateTime          @updatedAt
  productSupplier ProductSupplier[]
}

enum Unit {
  UN
  KG
  CX
  LT
}
